(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"3im5":function(t,e,r){"use strict";r.r(e),r.d(e,"AuthorizationsModule",(function(){return T}));var i=r("ofXK"),n=r("tyNb"),o=r("fXoL"),s=r("TEn/");let a=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Bb({type:t,selectors:[["app-authorizations"]],decls:14,vars:0,consts:[["slot","bottom"],["tab","login"],["name","home"],["tab","register"],["name","calendar"],["tab",""],["name","log-out-outline"]],template:function(t,e){1&t&&(o.Mb(0,"ion-tabs"),o.Mb(1,"ion-tab-bar",0),o.Mb(2,"ion-tab-button",1),o.Ib(3,"ion-icon",2),o.Mb(4,"ion-label"),o.jc(5,"Login"),o.Lb(),o.Lb(),o.Mb(6,"ion-tab-button",3),o.Ib(7,"ion-icon",4),o.Mb(8,"ion-label"),o.jc(9,"Register"),o.Lb(),o.Lb(),o.Mb(10,"ion-tab-button",5),o.Ib(11,"ion-icon",6),o.Mb(12,"ion-label"),o.jc(13,"Log Out"),o.Lb(),o.Lb(),o.Lb(),o.Lb())},directives:[s.m,s.k,s.l,s.e,s.h],styles:[""]}),t})(),b=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Bb({type:t,selectors:[["app-entry"]],decls:2,vars:0,template:function(t,e){1&t&&(o.Mb(0,"p"),o.jc(1," entry works!\n"),o.Lb())},styles:[""]}),t})();var c=r("3Pt+");let l=(()=>{class t{constructor(t){this.formBuilder=t}build(){return this.formBuilder.group({email:["",[c.k.required,c.k.email,c.k.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:["",c.k.required]})}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(c.a))},t.\u0275prov=o.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=r("vkgz"),d=r("AytR"),p=r("tk/3");let g=(()=>{class t{constructor(){const t=window.localStorage.getItem(d.a.storage.user);t&&(this.user=JSON.parse(t))}setUser(t){window.localStorage.setItem(d.a.storage.user,JSON.stringify(this.user=t))}getUser(){return this.user}has(){return!!this.user}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),m=(()=>{class t{constructor(t,e){this.http=t,this.userService=e}register(t){return this.http.post(d.a.api.register,{username:t.get("username").value,email:t.get("email").value,password:t.get("password").value})}login(t){return this.http.post(d.a.api.login,{email:t.get("email").value,password:t.get("password").value}).pipe(Object(u.a)(t=>{this.userService.setUser(t)}))}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(p.b),o.Qb(g))},t.\u0275prov=o.Db({token:t,factory:t.\u0275fac,providedIn:"any"}),t})(),f=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Bb({type:t,selectors:[["app-toolbar"]],inputs:{title:"title"},decls:4,vars:1,template:function(t,e){1&t&&(o.Mb(0,"ion-header"),o.Mb(1,"ion-toolbar"),o.Mb(2,"ion-title"),o.jc(3),o.Lb(),o.Lb(),o.Lb()),2&t&&(o.xb(3),o.lc(" ",e.title," "))},directives:[s.d,s.p,s.o],styles:[""]}),t})();function v(t,e){if(1&t&&(o.Mb(0,"div"),o.Mb(1,"h1",8),o.jc(2),o.Lb(),o.Lb()),2&t){const t=o.Wb();o.xb(2),o.lc(" ",t.error," ")}}function w(t,e){1&t&&(o.Mb(0,"h1"),o.jc(1,"Login"),o.Lb())}function L(t,e){1&t&&(o.Mb(0,"span"),o.jc(1," Email is required "),o.Lb())}function y(t,e){1&t&&(o.Mb(0,"span"),o.jc(1," Email must be valid "),o.Lb())}function M(t,e){if(1&t&&(o.Mb(0,"ion-text",9),o.hc(1,L,2,0,"span",2),o.hc(2,y,2,0,"span",2),o.Lb()),2&t){const t=o.Wb();o.xb(1),o.bc("ngIf",t.loginForm.get("email").hasError("required")),o.xb(1),o.bc("ngIf",t.loginForm.get("email").hasError("email"))}}function I(t,e){1&t&&(o.Mb(0,"ion-text",9),o.Mb(1,"span"),o.jc(2," Password can't be empty "),o.Lb(),o.Lb())}function x(t,e){if(1&t&&(o.Mb(0,"div"),o.Mb(1,"ion-button",10),o.jc(2,"Login"),o.Lb(),o.Lb()),2&t){const t=o.Wb();o.xb(1),o.bc("disabled",!t.loginForm.valid)}}function F(t,e){1&t&&(o.Mb(0,"div"),o.Ib(1,"ion-spinner",11),o.Lb())}let j=(()=>{class t{constructor(t,e,r,i){this.loginFormService=t,this.authorizationsHttpService=e,this.routerService=r,this.loading=i}ngOnInit(){this.loginForm=this.loginFormService.build()}ngOnDestroy(){this.ionViewDidLeave()}ionViewDidLeave(){this.loginForm=this.loginFormService.build()}login(){this.authorizationsHttpService.login(this.loginForm).subscribe(t=>{this.routerService.navigate(["/contacts","dashboard"])},t=>{this.error=t})}}return t.\u0275fac=function(e){return new(e||t)(o.Hb(l),o.Hb(m),o.Hb(n.g),o.Hb(f))},t.\u0275cmp=o.Bb({type:t,selectors:[["app-login"]],decls:17,vars:8,consts:[[3,"title"],[1,"ion-padding"],[4,"ngIf"],[3,"formGroup","ngSubmit"],["position","floating"],["type","email","formControlName","email"],["color","danger",4,"ngIf"],["type","password","formControlName","password"],[2,"color","red"],["color","danger"],["type","submit",3,"disabled"],["name","crescent"]],template:function(t,e){1&t&&(o.Ib(0,"app-toolbar",0),o.Mb(1,"ion-content",1),o.hc(2,v,3,1,"div",2),o.hc(3,w,2,0,"h1",2),o.Mb(4,"form",3),o.Ub("ngSubmit",(function(){return e.login()})),o.Mb(5,"ion-item"),o.Mb(6,"ion-label",4),o.jc(7,"Email:"),o.Lb(),o.Ib(8,"ion-input",5),o.hc(9,M,3,2,"ion-text",6),o.Lb(),o.Mb(10,"ion-item"),o.Mb(11,"ion-label",4),o.jc(12,"Password:"),o.Lb(),o.Ib(13,"ion-input",7),o.hc(14,I,3,0,"ion-text",6),o.Lb(),o.hc(15,x,3,1,"div",2),o.hc(16,F,2,0,"div",2),o.Lb(),o.Lb()),2&t&&(o.bc("title","Login"),o.xb(2),o.bc("ngIf",e.error),o.xb(1),o.bc("ngIf",!e.error),o.xb(1),o.bc("formGroup",e.loginForm),o.xb(5),o.bc("ngIf",!e.loginForm.get("email").valid&&e.loginForm.get("email").dirty),o.xb(5),o.bc("ngIf",!e.loginForm.get("password").valid&&e.loginForm.get("password").dirty),o.xb(1),o.bc("ngIf",!e.loading.login),o.xb(1),o.bc("ngIf",e.loading.login))},directives:[h,s.c,i.i,c.l,c.i,c.c,s.g,s.h,s.f,s.u,c.h,c.b,s.n,s.b,s.j],styles:[""]}),t})(),S=(()=>{class t{constructor(){}validate(t){return t.dirty?(this.password||(this.password=t.root.get("password").valueChanges.subscribe(()=>{t.updateValueAndValidity()})),t.root.get("password").value===t.value?null:{repeatedPassword:!0}):(this.password&&(this.password.unsubscribe(),this.password=null),null)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.Cb({type:t,selectors:[["","appRepeatedPassword",""]],features:[o.wb([{provide:c.e,useExisting:t,multi:!0}])]}),t.\u0275prov=o.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),k=(()=>{class t{constructor(t,e){this.formBuilder=t,this.repeatedPasswordValidator=e}build(){return this.formBuilder.group({username:["",c.k.required],email:["",[c.k.required,c.k.email,c.k.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:["",c.k.required],verifyPassword:["",[c.k.required,this.repeatedPasswordValidator]]})}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(c.a),o.Qb(S))},t.\u0275prov=o.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function E(t,e){1&t&&(o.Mb(0,"span"),o.jc(1,"Register"),o.Lb())}function P(t,e){if(1&t&&(o.Mb(0,"span"),o.jc(1),o.Xb(2,"titlecase"),o.Lb()),2&t){const t=o.Wb(2);o.xb(1),o.kc(o.Yb(2,1,t.error.error.error))}}function C(t,e){1&t&&(o.Mb(0,"span"),o.jc(1," Sorry, something happened"),o.Lb())}function D(t,e){if(1&t&&(o.Mb(0,"ion-text",12),o.Kb(1,13),o.hc(2,P,3,3,"span",14),o.hc(3,C,2,0,"span",15),o.Jb(),o.Lb()),2&t){const t=o.Wb();o.xb(1),o.bc("ngSwitch",t.error.status),o.xb(1),o.bc("ngSwitchCase",409)}}function z(t,e){1&t&&(o.Mb(0,"span"),o.jc(1," Email is required "),o.Lb())}function q(t,e){1&t&&(o.Mb(0,"span"),o.jc(1," Email must be valid "),o.Lb())}function O(t,e){if(1&t&&(o.Mb(0,"ion-text",12),o.hc(1,z,2,0,"span",16),o.hc(2,q,2,0,"span",16),o.Lb()),2&t){const t=o.Wb();o.xb(1),o.bc("ngIf",t.validationsForm.get("email").hasError("required")),o.xb(1),o.bc("ngIf",t.validationsForm.get("email").hasError("email"))}}function H(t,e){1&t&&(o.Mb(0,"ion-text",12),o.Mb(1,"span"),o.jc(2," Password can't be empty "),o.Lb(),o.Lb())}function N(t,e){1&t&&(o.Mb(0,"ion-text",12),o.Mb(1,"span"),o.jc(2," Password doesn't match "),o.Lb(),o.Lb())}function B(t,e){1&t&&(o.Mb(0,"span"),o.jc(1," Username is required "),o.Lb())}function U(t,e){1&t&&(o.Mb(0,"span"),o.jc(1," Username must be valid "),o.Lb())}function V(t,e){if(1&t&&(o.Mb(0,"ion-text",12),o.hc(1,B,2,0,"span",16),o.hc(2,U,2,0,"span",16),o.Lb()),2&t){const t=o.Wb();o.xb(1),o.bc("ngIf",t.validationsForm.get("username").hasError("required")),o.xb(1),o.bc("ngIf",t.validationsForm.get("username").hasError("username"))}}const R=[{path:"",component:a,children:[{path:"entry",component:b},{path:"login",component:j},{path:"register",component:(()=>{class t{constructor(t,e,r){this.registerFormService=t,this.authorizationsHttpService=e,this.routerService=r}ngOnInit(){this.validationsForm=this.registerFormService.build()}ngOnDestroy(){this.ionViewDidLeave()}ionViewDidLeave(){this.validationsForm=this.registerFormService.build()}register(){this.authorizationsHttpService.register(this.validationsForm).subscribe(()=>{this.routerService.navigate(["/auth","login"])},t=>{this.error=t})}}return t.\u0275fac=function(e){return new(e||t)(o.Hb(k),o.Hb(m),o.Hb(n.g))},t.\u0275cmp=o.Bb({type:t,selectors:[["app-register"]],decls:29,vars:9,consts:[[3,"title"],[1,"ion-padding"],[4,"ngIf","ngIfElse"],["errorTitle",""],[3,"formGroup","ngSubmit"],["position","floating"],["type","email","formControlName","email"],["color","danger",4,"ngIf"],["type","password","formControlName","password"],["type","password","formControlName","verifyPassword"],["type","text","formControlName","username"],["type","submit",3,"disabled"],["color","danger"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"]],template:function(t,e){if(1&t&&(o.Ib(0,"app-toolbar",0),o.Mb(1,"ion-content",1),o.Mb(2,"h1"),o.hc(3,E,2,0,"span",2),o.hc(4,D,4,2,"ng-template",null,3,o.ic),o.Lb(),o.Mb(6,"form",4),o.Ub("ngSubmit",(function(){return e.register()})),o.Mb(7,"ion-item"),o.Mb(8,"ion-label",5),o.jc(9,"Email:"),o.Lb(),o.Ib(10,"ion-input",6),o.hc(11,O,3,2,"ion-text",7),o.Lb(),o.Mb(12,"ion-item"),o.Mb(13,"ion-label",5),o.jc(14,"Password:"),o.Lb(),o.Ib(15,"ion-input",8),o.hc(16,H,3,0,"ion-text",7),o.Lb(),o.Mb(17,"ion-item"),o.Mb(18,"ion-label",5),o.jc(19,"Verify your Password:"),o.Lb(),o.Ib(20,"ion-input",9),o.hc(21,N,3,0,"ion-text",7),o.Lb(),o.Mb(22,"ion-item"),o.Mb(23,"ion-label",5),o.jc(24,"Username:"),o.Lb(),o.Ib(25,"ion-input",10),o.hc(26,V,3,2,"ion-text",7),o.Lb(),o.Mb(27,"ion-button",11),o.jc(28,"Register"),o.Lb(),o.Lb(),o.Lb()),2&t){const t=o.dc(5);o.bc("title","Register"),o.xb(3),o.bc("ngIf",!e.error)("ngIfElse",t),o.xb(3),o.bc("formGroup",e.validationsForm),o.xb(5),o.bc("ngIf",!e.validationsForm.get("email").valid&&e.validationsForm.get("email").dirty),o.xb(5),o.bc("ngIf",!e.validationsForm.get("password").valid&&e.validationsForm.get("password").dirty),o.xb(5),o.bc("ngIf",!e.validationsForm.get("verifyPassword").valid&&e.validationsForm.get("verifyPassword").dirty),o.xb(5),o.bc("ngIf",!e.validationsForm.get("username").valid&&e.validationsForm.get("username").dirty),o.xb(1),o.bc("disabled",!e.validationsForm.valid)}},directives:[h,s.c,i.i,c.l,c.i,c.c,s.g,s.h,s.f,s.u,c.h,c.b,s.b,s.n,i.j,i.k,i.l],pipes:[i.o],styles:[""]}),t})()},{path:"**",redirectTo:"register"}]}];let W=(()=>{class t{}return t.\u0275mod=o.Fb({type:t}),t.\u0275inj=o.Eb({factory:function(e){return new(e||t)},imports:[[n.i.forChild(R)],n.i]}),t})();var J=r("PCNd"),Q=r("JIr8"),G=r("nYR2");let A=(()=>{class t{constructor(t){this.loadingService=t}intercept(t,e){let r=null;if(d.a.api.login==t.url)r="login";else{if(d.a.api.register!=t.url)return e.handle(t);r="register"}return this.loadingService[r]=!0,e.handle(t).pipe(Object(Q.a)(t=>{let e="Error Network";throw 404===t.status?e="Invalid Credentials":400===t.status?e="Form Invalid":409===t.status?e=t.error.error:500===t.status&&(e="Unavailable Service"),e}),Object(G.a)(()=>{this.loadingService[r]=!1}))}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(f))},t.\u0275prov=o.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),T=(()=>{class t{}return t.\u0275mod=o.Fb({type:t}),t.\u0275inj=o.Eb({factory:function(e){return new(e||t)},providers:[{provide:p.a,useClass:A,multi:!0}],imports:[[i.b,J.a,W]]}),t})()}}]);