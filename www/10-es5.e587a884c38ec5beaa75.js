!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"3im5":function(n,i,r){"use strict";r.r(i),r.d(i,"AuthorizationsModule",(function(){return bt}));var o,a,s,c,b,u,l,f=r("ofXK"),d=r("tyNb"),p=r("fXoL"),g=r("TEn/"),m=((a=function(){function n(){t(this,n)}return e(n,[{key:"ngOnInit",value:function(){}}]),n}()).\u0275fac=function(t){return new(t||a)},a.\u0275cmp=p.Bb({type:a,selectors:[["app-authorizations"]],decls:14,vars:0,consts:[["slot","bottom"],["tab","login"],["name","home"],["tab","register"],["name","calendar"],["tab",""],["name","log-out-outline"]],template:function(t,n){1&t&&(p.Mb(0,"ion-tabs"),p.Mb(1,"ion-tab-bar",0),p.Mb(2,"ion-tab-button",1),p.Ib(3,"ion-icon",2),p.Mb(4,"ion-label"),p.jc(5,"Login"),p.Lb(),p.Lb(),p.Mb(6,"ion-tab-button",3),p.Ib(7,"ion-icon",4),p.Mb(8,"ion-label"),p.jc(9,"Register"),p.Lb(),p.Lb(),p.Mb(10,"ion-tab-button",5),p.Ib(11,"ion-icon",6),p.Mb(12,"ion-label"),p.jc(13,"Log Out"),p.Lb(),p.Lb(),p.Lb(),p.Lb())},directives:[g.m,g.k,g.l,g.e,g.h],styles:[""]}),a),v=((o=function(){function n(){t(this,n)}return e(n,[{key:"ngOnInit",value:function(){}}]),n}()).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=p.Bb({type:o,selectors:[["app-entry"]],decls:2,vars:0,template:function(t,n){1&t&&(p.Mb(0,"p"),p.jc(1," entry works!\n"),p.Lb())},styles:[""]}),o),h=r("3Pt+"),y=((s=function(){function n(e){t(this,n),this.formBuilder=e}return e(n,[{key:"build",value:function(){return this.formBuilder.group({email:["",[h.k.required,h.k.email,h.k.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:["",h.k.required]})}}]),n}()).\u0275fac=function(t){return new(t||s)(p.Qb(h.a))},s.\u0275prov=p.Db({token:s,factory:s.\u0275fac,providedIn:"root"}),s),w=r("vkgz"),L=r("AytR"),M=r("tk/3"),I=((l=function(){function n(){t(this,n);var e=window.localStorage.getItem(L.a.storage.user);e&&(this.user=JSON.parse(e))}return e(n,[{key:"setUser",value:function(t){window.localStorage.setItem(L.a.storage.user,JSON.stringify(this.user=t))}},{key:"getUser",value:function(){return this.user}},{key:"has",value:function(){return!!this.user}}]),n}()).\u0275fac=function(t){return new(t||l)},l.\u0275prov=p.Db({token:l,factory:l.\u0275fac,providedIn:"root"}),l),k=((u=function(){function n(e,i){t(this,n),this.http=e,this.userService=i}return e(n,[{key:"register",value:function(t){return this.http.post(L.a.api.register,{username:t.get("username").value,email:t.get("email").value,password:t.get("password").value})}},{key:"login",value:function(t){var n=this;return this.http.post(L.a.api.login,{email:t.get("email").value,password:t.get("password").value}).pipe(Object(w.a)((function(t){n.userService.setUser(t)})))}}]),n}()).\u0275fac=function(t){return new(t||u)(p.Qb(M.b),p.Qb(I))},u.\u0275prov=p.Db({token:u,factory:u.\u0275fac,providedIn:"any"}),u),x=((b=function n(){t(this,n)}).\u0275fac=function(t){return new(t||b)},b.\u0275prov=p.Db({token:b,factory:b.\u0275fac,providedIn:"root"}),b),F=((c=function n(){t(this,n)}).\u0275fac=function(t){return new(t||c)},c.\u0275cmp=p.Bb({type:c,selectors:[["app-toolbar"]],inputs:{title:"title"},decls:4,vars:1,template:function(t,n){1&t&&(p.Mb(0,"ion-header"),p.Mb(1,"ion-toolbar"),p.Mb(2,"ion-title"),p.jc(3),p.Lb(),p.Lb(),p.Lb()),2&t&&(p.xb(3),p.lc(" ",n.title," "))},directives:[g.d,g.p,g.o],styles:[""]}),c);function j(t,n){if(1&t&&(p.Mb(0,"div"),p.Mb(1,"h1",8),p.jc(2),p.Lb(),p.Lb()),2&t){var e=p.Wb();p.xb(2),p.lc(" ",e.error," ")}}function S(t,n){1&t&&(p.Mb(0,"h1"),p.jc(1,"Login"),p.Lb())}function E(t,n){1&t&&(p.Mb(0,"span"),p.jc(1," Email is required "),p.Lb())}function P(t,n){1&t&&(p.Mb(0,"span"),p.jc(1," Email must be valid "),p.Lb())}function C(t,n){if(1&t&&(p.Mb(0,"ion-text",9),p.hc(1,E,2,0,"span",2),p.hc(2,P,2,0,"span",2),p.Lb()),2&t){var e=p.Wb();p.xb(1),p.bc("ngIf",e.loginForm.get("email").hasError("required")),p.xb(1),p.bc("ngIf",e.loginForm.get("email").hasError("email"))}}function D(t,n){1&t&&(p.Mb(0,"ion-text",9),p.Mb(1,"span"),p.jc(2," Password can't be empty "),p.Lb(),p.Lb())}function z(t,n){if(1&t&&(p.Mb(0,"div"),p.Mb(1,"ion-button",10),p.jc(2,"Login"),p.Lb(),p.Lb()),2&t){var e=p.Wb();p.xb(1),p.bc("disabled",!e.loginForm.valid)}}function O(t,n){1&t&&(p.Mb(0,"div"),p.Ib(1,"ion-spinner",11),p.Lb())}var q,H,N,B=((N=function(){function n(e,i,r,o){t(this,n),this.loginFormService=e,this.authorizationsHttpService=i,this.routerService=r,this.loading=o}return e(n,[{key:"ngOnInit",value:function(){this.loginForm=this.loginFormService.build()}},{key:"ngOnDestroy",value:function(){this.ionViewDidLeave()}},{key:"ionViewDidLeave",value:function(){this.loginForm=this.loginFormService.build()}},{key:"login",value:function(){var t=this;this.authorizationsHttpService.login(this.loginForm).subscribe((function(n){t.routerService.navigate(["/contacts","dashboard"])}),(function(n){t.error=n}))}}]),n}()).\u0275fac=function(t){return new(t||N)(p.Hb(y),p.Hb(k),p.Hb(d.g),p.Hb(x))},N.\u0275cmp=p.Bb({type:N,selectors:[["app-login"]],decls:17,vars:8,consts:[[3,"title"],[1,"ion-padding"],[4,"ngIf"],[3,"formGroup","ngSubmit"],["position","floating"],["type","email","formControlName","email"],["color","danger",4,"ngIf"],["type","password","formControlName","password"],[2,"color","red"],["color","danger"],["type","submit",3,"disabled"],["name","crescent"]],template:function(t,n){1&t&&(p.Ib(0,"app-toolbar",0),p.Mb(1,"ion-content",1),p.hc(2,j,3,1,"div",2),p.hc(3,S,2,0,"h1",2),p.Mb(4,"form",3),p.Ub("ngSubmit",(function(){return n.login()})),p.Mb(5,"ion-item"),p.Mb(6,"ion-label",4),p.jc(7,"Email:"),p.Lb(),p.Ib(8,"ion-input",5),p.hc(9,C,3,2,"ion-text",6),p.Lb(),p.Mb(10,"ion-item"),p.Mb(11,"ion-label",4),p.jc(12,"Password:"),p.Lb(),p.Ib(13,"ion-input",7),p.hc(14,D,3,0,"ion-text",6),p.Lb(),p.hc(15,z,3,1,"div",2),p.hc(16,O,2,0,"div",2),p.Lb(),p.Lb()),2&t&&(p.bc("title","Login"),p.xb(2),p.bc("ngIf",n.error),p.xb(1),p.bc("ngIf",!n.error),p.xb(1),p.bc("formGroup",n.loginForm),p.xb(5),p.bc("ngIf",!n.loginForm.get("email").valid&&n.loginForm.get("email").dirty),p.xb(5),p.bc("ngIf",!n.loginForm.get("password").valid&&n.loginForm.get("password").dirty),p.xb(1),p.bc("ngIf",!n.loading.login),p.xb(1),p.bc("ngIf",n.loading.login))},directives:[F,g.c,f.i,h.l,h.i,h.c,g.g,g.h,g.f,g.u,h.h,h.b,g.n,g.b,g.j],styles:[""]}),N),U=((H=function(){function n(){t(this,n)}return e(n,[{key:"validate",value:function(t){return t.dirty?(this.password||(this.password=t.root.get("password").valueChanges.subscribe((function(){t.updateValueAndValidity()}))),t.root.get("password").value===t.value?null:{repeatedPassword:!0}):(this.password&&(this.password.unsubscribe(),this.password=null),null)}}]),n}()).\u0275fac=function(t){return new(t||H)},H.\u0275dir=p.Cb({type:H,selectors:[["","appRepeatedPassword",""]],features:[p.wb([{provide:h.e,useExisting:H,multi:!0}])]}),H.\u0275prov=p.Db({token:H,factory:H.\u0275fac,providedIn:"root"}),H),V=((q=function(){function n(e,i){t(this,n),this.formBuilder=e,this.repeatedPasswordValidator=i}return e(n,[{key:"build",value:function(){return this.formBuilder.group({username:["",h.k.required],email:["",[h.k.required,h.k.email,h.k.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:["",h.k.required],verifyPassword:["",[h.k.required,this.repeatedPasswordValidator]]})}}]),n}()).\u0275fac=function(t){return new(t||q)(p.Qb(h.a),p.Qb(U))},q.\u0275prov=p.Db({token:q,factory:q.\u0275fac,providedIn:"root"}),q);function R(t,n){1&t&&(p.Mb(0,"span"),p.jc(1,"Register"),p.Lb())}function W(t,n){if(1&t&&(p.Mb(0,"span"),p.jc(1),p.Xb(2,"titlecase"),p.Lb()),2&t){var e=p.Wb(2);p.xb(1),p.kc(p.Yb(2,1,e.error.error.error))}}function J(t,n){1&t&&(p.Mb(0,"span"),p.jc(1," Sorry, something happened"),p.Lb())}function Q(t,n){if(1&t&&(p.Mb(0,"ion-text",12),p.Kb(1,13),p.hc(2,W,3,3,"span",14),p.hc(3,J,2,0,"span",15),p.Jb(),p.Lb()),2&t){var e=p.Wb();p.xb(1),p.bc("ngSwitch",e.error.status),p.xb(1),p.bc("ngSwitchCase",409)}}function G(t,n){1&t&&(p.Mb(0,"span"),p.jc(1," Email is required "),p.Lb())}function T(t,n){1&t&&(p.Mb(0,"span"),p.jc(1," Email must be valid "),p.Lb())}function A(t,n){if(1&t&&(p.Mb(0,"ion-text",12),p.hc(1,G,2,0,"span",16),p.hc(2,T,2,0,"span",16),p.Lb()),2&t){var e=p.Wb();p.xb(1),p.bc("ngIf",e.validationsForm.get("email").hasError("required")),p.xb(1),p.bc("ngIf",e.validationsForm.get("email").hasError("email"))}}function X(t,n){1&t&&(p.Mb(0,"ion-text",12),p.Mb(1,"span"),p.jc(2," Password can't be empty "),p.Lb(),p.Lb())}function K(t,n){1&t&&(p.Mb(0,"ion-text",12),p.Mb(1,"span"),p.jc(2," Password doesn't match "),p.Lb(),p.Lb())}function Y(t,n){1&t&&(p.Mb(0,"span"),p.jc(1," Username is required "),p.Lb())}function $(t,n){1&t&&(p.Mb(0,"span"),p.jc(1," Username must be valid "),p.Lb())}function _(t,n){if(1&t&&(p.Mb(0,"ion-text",12),p.hc(1,Y,2,0,"span",16),p.hc(2,$,2,0,"span",16),p.Lb()),2&t){var e=p.Wb();p.xb(1),p.bc("ngIf",e.validationsForm.get("username").hasError("required")),p.xb(1),p.bc("ngIf",e.validationsForm.get("username").hasError("username"))}}var Z,tt,nt,et,it=[{path:"",component:m,children:[{path:"entry",component:v},{path:"login",component:B},{path:"register",component:(Z=function(){function n(e,i,r){t(this,n),this.registerFormService=e,this.authorizationsHttpService=i,this.routerService=r}return e(n,[{key:"ngOnInit",value:function(){this.validationsForm=this.registerFormService.build()}},{key:"ngOnDestroy",value:function(){this.ionViewDidLeave()}},{key:"ionViewDidLeave",value:function(){this.validationsForm=this.registerFormService.build()}},{key:"register",value:function(){var t=this;this.authorizationsHttpService.register(this.validationsForm).subscribe((function(){t.routerService.navigate(["/auth","login"])}),(function(n){t.error=n}))}}]),n}(),Z.\u0275fac=function(t){return new(t||Z)(p.Hb(V),p.Hb(k),p.Hb(d.g))},Z.\u0275cmp=p.Bb({type:Z,selectors:[["app-register"]],decls:29,vars:9,consts:[[3,"title"],[1,"ion-padding"],[4,"ngIf","ngIfElse"],["errorTitle",""],[3,"formGroup","ngSubmit"],["position","floating"],["type","email","formControlName","email"],["color","danger",4,"ngIf"],["type","password","formControlName","password"],["type","password","formControlName","verifyPassword"],["type","text","formControlName","username"],["type","submit",3,"disabled"],["color","danger"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"]],template:function(t,n){if(1&t&&(p.Ib(0,"app-toolbar",0),p.Mb(1,"ion-content",1),p.Mb(2,"h1"),p.hc(3,R,2,0,"span",2),p.hc(4,Q,4,2,"ng-template",null,3,p.ic),p.Lb(),p.Mb(6,"form",4),p.Ub("ngSubmit",(function(){return n.register()})),p.Mb(7,"ion-item"),p.Mb(8,"ion-label",5),p.jc(9,"Email:"),p.Lb(),p.Ib(10,"ion-input",6),p.hc(11,A,3,2,"ion-text",7),p.Lb(),p.Mb(12,"ion-item"),p.Mb(13,"ion-label",5),p.jc(14,"Password:"),p.Lb(),p.Ib(15,"ion-input",8),p.hc(16,X,3,0,"ion-text",7),p.Lb(),p.Mb(17,"ion-item"),p.Mb(18,"ion-label",5),p.jc(19,"Verify your Password:"),p.Lb(),p.Ib(20,"ion-input",9),p.hc(21,K,3,0,"ion-text",7),p.Lb(),p.Mb(22,"ion-item"),p.Mb(23,"ion-label",5),p.jc(24,"Username:"),p.Lb(),p.Ib(25,"ion-input",10),p.hc(26,_,3,2,"ion-text",7),p.Lb(),p.Mb(27,"ion-button",11),p.jc(28,"Register"),p.Lb(),p.Lb(),p.Lb()),2&t){var e=p.dc(5);p.bc("title","Register"),p.xb(3),p.bc("ngIf",!n.error)("ngIfElse",e),p.xb(3),p.bc("formGroup",n.validationsForm),p.xb(5),p.bc("ngIf",!n.validationsForm.get("email").valid&&n.validationsForm.get("email").dirty),p.xb(5),p.bc("ngIf",!n.validationsForm.get("password").valid&&n.validationsForm.get("password").dirty),p.xb(5),p.bc("ngIf",!n.validationsForm.get("verifyPassword").valid&&n.validationsForm.get("verifyPassword").dirty),p.xb(5),p.bc("ngIf",!n.validationsForm.get("username").valid&&n.validationsForm.get("username").dirty),p.xb(1),p.bc("disabled",!n.validationsForm.valid)}},directives:[F,g.c,f.i,h.l,h.i,h.c,g.g,g.h,g.f,g.u,h.h,h.b,g.b,g.n,f.j,f.k,f.l],pipes:[f.o],styles:[""]}),Z)},{path:"**",redirectTo:"register"}]}],rt=((tt=function n(){t(this,n)}).\u0275mod=p.Fb({type:tt}),tt.\u0275inj=p.Eb({factory:function(t){return new(t||tt)},imports:[[d.i.forChild(it)],d.i]}),tt),ot=r("PCNd"),at=r("JIr8"),st=r("nYR2"),ct=((et=function(){function n(e){t(this,n),this.loadingService=e}return e(n,[{key:"intercept",value:function(t,n){var e=this,i=null;if(L.a.api.login==t.url)i="login";else{if(L.a.api.register!=t.url)return n.handle(t);i="register"}return this.loadingService[i]=!0,n.handle(t).pipe(Object(at.a)((function(t){var n="Error Network";throw 404===t.status?n="Invalid Credentials":400===t.status?n="Form Invalid":409===t.status?n=t.error.error:500===t.status&&(n="Unavailable Service"),n})),Object(st.a)((function(){e.loadingService[i]=!1})))}}]),n}()).\u0275fac=function(t){return new(t||et)(p.Qb(x))},et.\u0275prov=p.Db({token:et,factory:et.\u0275fac,providedIn:"root"}),et),bt=((nt=function n(){t(this,n)}).\u0275mod=p.Fb({type:nt}),nt.\u0275inj=p.Eb({factory:function(t){return new(t||nt)},providers:[{provide:M.a,useClass:ct,multi:!0}],imports:[[f.b,ot.a,rt]]}),nt)}}])}();